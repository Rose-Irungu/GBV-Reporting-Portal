{
    "sourceFile": "src/components/SurvivorComponents/settings.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1755767803966,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1755767803966,
            "name": "Commit-0",
            "content": "import { useState, useEffect } from \"react\";\r\nimport { Settings } from \"lucide-react\";\r\nimport toast from \"react-hot-toast\";\r\n\r\nconst SurvivorProfile = () => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [profile, setProfile] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    phone: \"\",\r\n  });\r\n\r\n  // Fetch profile data when modal opens\r\n  useEffect(() => {\r\n    if (open) {\r\n      setLoading(true);\r\n      fetch(\"/api/survivor/profile\") // ðŸ‘ˆ adjust to your backend route\r\n        .then((res) => res.json())\r\n        .then((data) => setProfile(data))\r\n        .catch(() => toast.error(\"Failed to load profile\"))\r\n        .finally(() => setLoading(false));\r\n    }\r\n  }, [open]);\r\n\r\n  // Handle form changes\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setProfile((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  // Save updates\r\n  const handleSave = () => {\r\n    setLoading(true);\r\n    fetch(\"/api/survivor/profile/update\", {\r\n      method: \"PATCH\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(profile),\r\n    })\r\n      .then((res) => res.json())\r\n      .then(() => {\r\n        toast.success(\"Profile updated!\");\r\n        setOpen(false);\r\n      })\r\n      .catch(() => toast.error(\"Failed to update\"))\r\n      .finally(() => setLoading(false));\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* Settings Icon */}\r\n      <button onClick={() => setOpen(true)} className=\"p-2 hover:bg-gray-100 rounded-full\">\r\n        <Settings className=\"w-6 h-6\" />\r\n      </button>\r\n\r\n      {/* Modal */}\r\n      {open && (\r\n        <div className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40\">\r\n          <div className=\"bg-white p-6 rounded-2xl w-96 shadow-xl\">\r\n            <h2 className=\"text-xl font-semibold mb-4\">Profile Settings</h2>\r\n\r\n            {loading ? (\r\n              <p>Loading...</p>\r\n            ) : (\r\n              <form className=\"space-y-3\">\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"name\"\r\n                  value={profile.name}\r\n                  onChange={handleChange}\r\n                  placeholder=\"Full Name\"\r\n                  className=\"w-full p-2 border rounded\"\r\n                />\r\n                <input\r\n                  type=\"email\"\r\n                  name=\"email\"\r\n                  value={profile.email}\r\n                  onChange={handleChange}\r\n                  placeholder=\"Email\"\r\n                  className=\"w-full p-2 border rounded\"\r\n                />\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"phone\"\r\n                  value={profile.phone}\r\n                  onChange={handleChange}\r\n                  placeholder=\"Phone Number\"\r\n                  className=\"w-full p-2 border rounded\"\r\n                />\r\n\r\n                <div className=\"flex justify-end space-x-2 mt-4\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"px-4 py-2 bg-gray-200 rounded-lg\"\r\n                    onClick={() => setOpen(false)}\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={handleSave}\r\n                    disabled={loading}\r\n                    className=\"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700\"\r\n                  >\r\n                    {loading ? \"Saving...\" : \"Save Changes\"}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SurvivorProfile;\r\n"
        }
    ]
}