{
    "sourceFile": "src/components/modals/ResolveModal.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1757009640805,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1757009814154,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,9 +50,9 @@\n \r\n   if (!showResolveModal) return null;\r\n \r\n   return (\r\n-    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n+    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-md transition-opacity duration-200 bg-opacity-50 flex items-center justify-center z-50\">\r\n       <div className=\"bg-white rounded-lg p-6 w-full max-w-md mx-4\">\r\n         {/* Header */}\r\n         <div className=\"flex items-center justify-between mb-6\">\r\n           <div className=\"flex items-center space-x-2\">\r\n"
                }
            ],
            "date": 1757009640805,
            "name": "Commit-0",
            "content": "import React, { useState } from 'react';\r\nimport { X, CheckCircle, AlertTriangle } from 'lucide-react';\r\n\r\nconst ResolveModal = ({ \r\n  showResolveModal, \r\n  setShowResolveModal, \r\n  selectedCase, \r\n  allReports,\r\n  onResolveCase \r\n}) => {\r\n  const [resolutionNotes, setResolutionNotes] = useState('');\r\n  const [resolutionType, setResolutionType] = useState('completed');\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  // Find the selected report\r\n  const selectedReport = allReports?.find(report => report.reference_code === selectedCase);\r\n\r\n  const handleResolve = async () => {\r\n    if (!resolutionNotes.trim()) {\r\n      alert('Please provide resolution notes');\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      await onResolveCase({\r\n        referenceCode: selectedCase,\r\n        resolutionType,\r\n        resolutionNotes: resolutionNotes.trim(),\r\n        resolvedAt: new Date().toISOString()\r\n      });\r\n      \r\n      // Reset form and close modal\r\n      setResolutionNotes('');\r\n      setResolutionType('completed');\r\n      setShowResolveModal(false);\r\n    } catch (error) {\r\n      console.error('Error resolving case:', error);\r\n      alert('Failed to resolve case. Please try again.');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setResolutionNotes('');\r\n    setResolutionType('completed');\r\n    setShowResolveModal(false);\r\n  };\r\n\r\n  if (!showResolveModal) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-lg p-6 w-full max-w-md mx-4\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <CheckCircle className=\"w-6 h-6 text-green-600\" />\r\n            <h2 className=\"text-xl font-semibold text-gray-900\">\r\n              Resolve Case\r\n            </h2>\r\n          </div>\r\n          <button\r\n            onClick={handleCancel}\r\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\r\n          >\r\n            <X className=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Case Info */}\r\n        {selectedReport && (\r\n          <div className=\"bg-gray-50 rounded-lg p-4 mb-6\">\r\n            <h3 className=\"font-medium text-gray-900 mb-2\">Case Details</h3>\r\n            <div className=\"space-y-1 text-sm text-gray-600\">\r\n              <p><span className=\"font-medium\">Case ID:</span> {selectedReport.reference_code}</p>\r\n              <p><span className=\"font-medium\">Reporter:</span> {selectedReport.full_name || 'N/A'}</p>\r\n              <p><span className=\"font-medium\">Type:</span> {selectedReport.incident_type || 'N/A'}</p>\r\n              <p><span className=\"font-medium\">Current Status:</span> \r\n                <span className=\"ml-1 px-2 py-0.5 bg-blue-100 text-blue-800 rounded-full text-xs\">\r\n                  {selectedReport.status}\r\n                </span>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Resolution Type */}\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            Resolution Type\r\n          </label>\r\n          <select\r\n            value={resolutionType}\r\n            onChange={(e) => setResolutionType(e.target.value)}\r\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\"\r\n          >\r\n            <option value=\"completed\">Completed Successfully</option>\r\n            <option value=\"resolved\">Issue Resolved</option>\r\n            <option value=\"closed\">Case Closed</option>\r\n            <option value=\"duplicate\">Duplicate Case</option>\r\n            <option value=\"invalid\">Invalid Report</option>\r\n            <option value=\"no_action\">No Action Required</option>\r\n          </select>\r\n        </div>\r\n\r\n        {/* Resolution Notes */}\r\n        <div className=\"mb-6\">\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            Resolution Notes *\r\n          </label>\r\n          <textarea\r\n            value={resolutionNotes}\r\n            onChange={(e) => setResolutionNotes(e.target.value)}\r\n            placeholder=\"Provide details about how this case was resolved...\"\r\n            rows={4}\r\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent resize-none\"\r\n            required\r\n          />\r\n          <p className=\"text-xs text-gray-500 mt-1\">\r\n            Please provide detailed notes about the resolution for record keeping.\r\n          </p>\r\n        </div>\r\n\r\n        {/* Warning Message */}\r\n        <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-3 mb-6\">\r\n          <div className=\"flex items-start space-x-2\">\r\n            <AlertTriangle className=\"w-4 h-4 text-amber-500 mt-0.5 flex-shrink-0\" />\r\n            <div className=\"text-sm text-amber-700\">\r\n              <p className=\"font-medium\">Important:</p>\r\n              <p>Once resolved, this case will be marked as completed. Make sure all necessary actions have been taken.</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex space-x-3\">\r\n          <button\r\n            onClick={handleCancel}\r\n            className=\"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors font-medium\"\r\n            disabled={isSubmitting}\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            onClick={handleResolve}\r\n            disabled={isSubmitting || !resolutionNotes.trim()}\r\n            className=\"flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2\"\r\n          >\r\n            {isSubmitting ? (\r\n              <>\r\n                <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n                <span>Resolving...</span>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <CheckCircle className=\"w-4 h-4\" />\r\n                <span>Resolve Case</span>\r\n              </>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ResolveModal;"
        }
    ]
}